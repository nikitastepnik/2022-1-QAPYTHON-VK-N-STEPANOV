{"uuid": "ca4dde29-0c39-4a29-b57b-1d7e43cc456d", "children": ["6a404ef3-c51b-47bd-a6f9-8e2f8233e018"], "befores": [{"name": "mysql_client_fixture", "status": "broken", "statusDetails": {"message": "sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2003, \"Can't connect to MySQL server on 'mysql' ([Errno 111] Connection refused)\")\n(Background on this error at: https://sqlalche.me/e/14/e3q8)\n", "trace": "  File \"/usr/local/lib/python3.8/site-packages/pluggy/_callers.py\", line 39, in _multicall\n    res = hook_impl.function(*args)\n  File \"/usr/local/lib/python3.8/site-packages/_pytest/fixtures.py\", line 1122, in pytest_fixture_setup\n    result = call_fixture_func(fixturefunc, request, kwargs)\n  File \"/usr/local/lib/python3.8/site-packages/_pytest/fixtures.py\", line 917, in call_fixture_func\n    fixture_result = next(generator)\n  File \"/final_project/code/conftest.py\", line 38, in mysql_client_fixture\n    mysql_client.connect()\n  File \"/final_project/code/mysql/client.py\", line 26, in connect\n    self.connection = self.engine.connect()\n  File \"/usr/local/lib/python3.8/site-packages/sqlalchemy/engine/base.py\", line 3234, in connect\n    return self._connection_cls(self, close_with_result=close_with_result)\n  File \"/usr/local/lib/python3.8/site-packages/sqlalchemy/engine/base.py\", line 96, in __init__\n    else engine.raw_connection()\n  File \"/usr/local/lib/python3.8/site-packages/sqlalchemy/engine/base.py\", line 3313, in raw_connection\n    return self._wrap_pool_connect(self.pool.connect, _connection)\n  File \"/usr/local/lib/python3.8/site-packages/sqlalchemy/engine/base.py\", line 3283, in _wrap_pool_connect\n    Connection._handle_dbapi_exception_noconnection(\n  File \"/usr/local/lib/python3.8/site-packages/sqlalchemy/engine/base.py\", line 2117, in _handle_dbapi_exception_noconnection\n    util.raise_(\n  File \"/usr/local/lib/python3.8/site-packages/sqlalchemy/util/compat.py\", line 207, in raise_\n    raise exception\n  File \"/usr/local/lib/python3.8/site-packages/sqlalchemy/engine/base.py\", line 3280, in _wrap_pool_connect\n    return fn()\n  File \"/usr/local/lib/python3.8/site-packages/sqlalchemy/pool/base.py\", line 310, in connect\n    return _ConnectionFairy._checkout(self)\n  File \"/usr/local/lib/python3.8/site-packages/sqlalchemy/pool/base.py\", line 868, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n  File \"/usr/local/lib/python3.8/site-packages/sqlalchemy/pool/base.py\", line 476, in checkout\n    rec = pool._do_get()\n  File \"/usr/local/lib/python3.8/site-packages/sqlalchemy/pool/impl.py\", line 146, in _do_get\n    self._dec_overflow()\n  File \"/usr/local/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py\", line 70, in __exit__\n    compat.raise_(\n  File \"/usr/local/lib/python3.8/site-packages/sqlalchemy/util/compat.py\", line 207, in raise_\n    raise exception\n  File \"/usr/local/lib/python3.8/site-packages/sqlalchemy/pool/impl.py\", line 143, in _do_get\n    return self._create_connection()\n  File \"/usr/local/lib/python3.8/site-packages/sqlalchemy/pool/base.py\", line 256, in _create_connection\n    return _ConnectionRecord(self)\n  File \"/usr/local/lib/python3.8/site-packages/sqlalchemy/pool/base.py\", line 371, in __init__\n    self.__connect()\n  File \"/usr/local/lib/python3.8/site-packages/sqlalchemy/pool/base.py\", line 666, in __connect\n    pool.logger.debug(\"Error on connect(): %s\", e)\n  File \"/usr/local/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py\", line 70, in __exit__\n    compat.raise_(\n  File \"/usr/local/lib/python3.8/site-packages/sqlalchemy/util/compat.py\", line 207, in raise_\n    raise exception\n  File \"/usr/local/lib/python3.8/site-packages/sqlalchemy/pool/base.py\", line 661, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n  File \"/usr/local/lib/python3.8/site-packages/sqlalchemy/engine/create.py\", line 590, in connect\n    return dialect.connect(*cargs, **cparams)\n  File \"/usr/local/lib/python3.8/site-packages/sqlalchemy/engine/default.py\", line 597, in connect\n    return self.dbapi.connect(*cargs, **cparams)\n  File \"/usr/local/lib/python3.8/site-packages/pymysql/connections.py\", line 353, in __init__\n    self.connect()\n  File \"/usr/local/lib/python3.8/site-packages/pymysql/connections.py\", line 664, in connect\n    raise exc\n"}, "steps": [{"name": "Выполняем коннект к БД и возвращаем объект соединения", "status": "broken", "statusDetails": {"message": "sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2003, \"Can't connect to MySQL server on 'mysql' ([Errno 111] Connection refused)\")\n(Background on this error at: https://sqlalche.me/e/14/e3q8)\n", "trace": "  File \"/final_project/code/conftest.py\", line 38, in mysql_client_fixture\n    mysql_client.connect()\n  File \"/final_project/code/mysql/client.py\", line 26, in connect\n    self.connection = self.engine.connect()\n  File \"/usr/local/lib/python3.8/site-packages/sqlalchemy/engine/base.py\", line 3234, in connect\n    return self._connection_cls(self, close_with_result=close_with_result)\n  File \"/usr/local/lib/python3.8/site-packages/sqlalchemy/engine/base.py\", line 96, in __init__\n    else engine.raw_connection()\n  File \"/usr/local/lib/python3.8/site-packages/sqlalchemy/engine/base.py\", line 3313, in raw_connection\n    return self._wrap_pool_connect(self.pool.connect, _connection)\n  File \"/usr/local/lib/python3.8/site-packages/sqlalchemy/engine/base.py\", line 3283, in _wrap_pool_connect\n    Connection._handle_dbapi_exception_noconnection(\n  File \"/usr/local/lib/python3.8/site-packages/sqlalchemy/engine/base.py\", line 2117, in _handle_dbapi_exception_noconnection\n    util.raise_(\n  File \"/usr/local/lib/python3.8/site-packages/sqlalchemy/util/compat.py\", line 207, in raise_\n    raise exception\n  File \"/usr/local/lib/python3.8/site-packages/sqlalchemy/engine/base.py\", line 3280, in _wrap_pool_connect\n    return fn()\n  File \"/usr/local/lib/python3.8/site-packages/sqlalchemy/pool/base.py\", line 310, in connect\n    return _ConnectionFairy._checkout(self)\n  File \"/usr/local/lib/python3.8/site-packages/sqlalchemy/pool/base.py\", line 868, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n  File \"/usr/local/lib/python3.8/site-packages/sqlalchemy/pool/base.py\", line 476, in checkout\n    rec = pool._do_get()\n  File \"/usr/local/lib/python3.8/site-packages/sqlalchemy/pool/impl.py\", line 146, in _do_get\n    self._dec_overflow()\n  File \"/usr/local/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py\", line 70, in __exit__\n    compat.raise_(\n  File \"/usr/local/lib/python3.8/site-packages/sqlalchemy/util/compat.py\", line 207, in raise_\n    raise exception\n  File \"/usr/local/lib/python3.8/site-packages/sqlalchemy/pool/impl.py\", line 143, in _do_get\n    return self._create_connection()\n  File \"/usr/local/lib/python3.8/site-packages/sqlalchemy/pool/base.py\", line 256, in _create_connection\n    return _ConnectionRecord(self)\n  File \"/usr/local/lib/python3.8/site-packages/sqlalchemy/pool/base.py\", line 371, in __init__\n    self.__connect()\n  File \"/usr/local/lib/python3.8/site-packages/sqlalchemy/pool/base.py\", line 666, in __connect\n    pool.logger.debug(\"Error on connect(): %s\", e)\n  File \"/usr/local/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py\", line 70, in __exit__\n    compat.raise_(\n  File \"/usr/local/lib/python3.8/site-packages/sqlalchemy/util/compat.py\", line 207, in raise_\n    raise exception\n  File \"/usr/local/lib/python3.8/site-packages/sqlalchemy/pool/base.py\", line 661, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n  File \"/usr/local/lib/python3.8/site-packages/sqlalchemy/engine/create.py\", line 590, in connect\n    return dialect.connect(*cargs, **cparams)\n  File \"/usr/local/lib/python3.8/site-packages/sqlalchemy/engine/default.py\", line 597, in connect\n    return self.dbapi.connect(*cargs, **cparams)\n  File \"/usr/local/lib/python3.8/site-packages/pymysql/connections.py\", line 353, in __init__\n    self.connect()\n  File \"/usr/local/lib/python3.8/site-packages/pymysql/connections.py\", line 664, in connect\n    raise exc\n"}, "start": 1653175439322, "stop": 1653175439323}], "start": 1653175439322, "stop": 1653175439324}], "start": 1653175439322, "stop": 1653175439669}